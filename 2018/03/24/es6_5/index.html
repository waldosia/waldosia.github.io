<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="waldosia"><link rel="alternative" href="/atom.xml" title="waldosia的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>深入理解ES6-第5章-解构：使数据访问更便捷 - waldosia的博客</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">waldosia的博客</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-03-24T01:13:00.000Z">三月 24, 2018</time><h1 class="post__title"><a href="/2018/03/24/es6_5/">深入理解ES6-第5章-解构：使数据访问更便捷</a></h1><div class="post__main echo"><h3 id="5-解构：使数据访问更便捷"><a href="#5-解构：使数据访问更便捷" class="headerlink" title="5.解构：使数据访问更便捷"></a>5.解构：使数据访问更便捷</h3><h4 id="5-1-为何使用解构功能"><a href="#5-1-为何使用解构功能" class="headerlink" title="5.1 为何使用解构功能"></a>5.1 为何使用解构功能</h4><p>　　从对象和数组中获取相应数据并赋值给变量，代码冗余。</p>
<h4 id="5-2-对象赋值"><a href="#5-2-对象赋值" class="headerlink" title="5.2 对象赋值"></a>5.2 对象赋值</h4><p>　　对象字面量的语法形式是在一个赋值操作符左边放置一个对象字面量。使用var，let或const声明变量，必须提供初始化程序（也就是等号右侧的值）。</p>
<h5 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h5><p>　　我们已经将对象解构应用到了变量的声明中。然而，我们同样可以在给变量赋值时使用解构语法。但是要用一对小括号包裹赋值语句，js引擎将一对开放的花括号视为一个代码块，而语法规定，代码块语句不允许出现在赋值语句左侧，添加小括号后可以将块语句转化为一个表达式，从而实现整个解构赋值的过程。<br>　　解构赋值表达式的值与表达式右侧的值相等。<br>　　解构赋值表达式右侧的值为null或者undefined会导致程序抛出错误。</p>
<h5 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h5><p>　　使用解构赋值表达式时，如果指定的局部变量名称在对象中不存在，那这个局部变量会被赋值为undefined。<br>　　当指定的属性名不存在时，可以随意定义一个默认值，在属性名称后添加一个等号（=）和相应的默认值即可，只有在右边的对象中没有对应的属性或者该属性为undefined时该值生效：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">	type: “Identifier”,</span><br><span class="line">	name: “foo”</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;type, name, value = <span class="literal">true</span>&#125; = node;</span><br></pre></td></tr></table></figure></p>
<h5 id="为非同名局部变量赋值"><a href="#为非同名局部变量赋值" class="headerlink" title="为非同名局部变量赋值"></a>为非同名局部变量赋值</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">	type: “Identifier”,</span><br><span class="line">	name: “foo”</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">type</span>: localType, <span class="attr">name</span>: localName = “bar” &#125; = node;</span><br></pre></td></tr></table></figure>
<p>　　上面为为localType和localName赋值。</p>
<h5 id="嵌套对象赋值"><a href="#嵌套对象赋值" class="headerlink" title="嵌套对象赋值"></a>嵌套对象赋值</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">	loc: &#123;</span><br><span class="line">		start: &#123;</span><br><span class="line">			line:<span class="number">1</span>,</span><br><span class="line">column:<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">loc</span>: &#123; start &#125;&#125; = node;           <span class="comment">//同名属性</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">loc</span>: &#123; <span class="attr">start</span>: localStart &#125;&#125; = node;  <span class="comment">//不同名属性</span></span><br></pre></td></tr></table></figure>
<h4 id="5-3-数组解构"><a href="#5-3-数组解构" class="headerlink" title="5.3 数组解构"></a>5.3 数组解构</h4><p>　　使用数组字面量，且解构操作全部在数组内完成。通过值在数组中的位置选取，且可以将其存储在任意变量中。未显示声明的元素直接被忽略。这个过程，原数组不发生变化。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [“red”, “green”, “blue”];</span><br><span class="line"><span class="keyword">let</span> [firstColor, secondColor] = colors;  <span class="comment">//firstColor=red,secondColor=green</span></span><br><span class="line"><span class="keyword">let</span> [ , , thirdColor] = colors;         <span class="comment">//thirdColor=blue</span></span><br></pre></td></tr></table></figure></p>
<h5 id="解构赋值-1"><a href="#解构赋值-1" class="headerlink" title="解构赋值"></a>解构赋值</h5><p>　　也可用于定义过的变量，但不需要用小括号包裹表达式。<br>变换两个变量的值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[a, b] = [b, a];</span><br></pre></td></tr></table></figure></p>
<p>如果右侧数组解构表达式的值为null或undefined，则会导致程序抛出错误。</p>
<h5 id="默认值-1"><a href="#默认值-1" class="headerlink" title="默认值"></a>默认值</h5><p>也可以在数组解构表达式中为数组的任意位置添加默认值，当指定位置的属性不存在或者其值为undefined时使用默认值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [“red”];</span><br><span class="line"><span class="keyword">let</span> [firstColor, secondColor = “green”] = colors;   <span class="comment">//firstColor=red,secondColor=green</span></span><br></pre></td></tr></table></figure></p>
<h5 id="嵌套数组解构"><a href="#嵌套数组解构" class="headerlink" title="嵌套数组解构"></a>嵌套数组解构</h5><p>　　在原有数组模式中插入另一个数组模式，即可将解构过程深入下一层级。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [“red”, [“green”, “lightGreen”], “blue”];</span><br><span class="line"><span class="keyword">let</span> [firstColor, [secondColor]] = colors;  <span class="comment">//firstColor=red,secondColor=green</span></span><br></pre></td></tr></table></figure></p>
<h5 id="不定元素"><a href="#不定元素" class="headerlink" title="不定元素"></a>不定元素</h5><p>　　在数组中，可以通过…语法将数组中的奇遇元素赋值给一个特定的变量。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [“red”, “green”, “blue”];</span><br><span class="line"><span class="keyword">let</span> [firstColor, …restColor] = colors;  <span class="comment">//firstColor=red,restColor=[green,blue]</span></span><br></pre></td></tr></table></figure></p>
<h5 id="数组复制"><a href="#数组复制" class="headerlink" title="数组复制"></a>数组复制</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [“red”, “green”, “blue”];</span><br><span class="line"><span class="keyword">let</span> […cloneColor] = colors; <span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">#### 5.4 混合解构</span></span><br><span class="line"><span class="string">　　可以混合使用对象解构和数组解构来创建更多复杂的表达式。在JSON配置中提取信息时，不再需要遍历整个结构。</span></span><br><span class="line"><span class="string">#### 5.5 解构参数</span></span><br><span class="line"><span class="string">　　当一个接受大量可选参数的JavaScript函数时，我们通常会创建一个可选对象，将额外的参数定义为这个对象的属性：</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, &#123; secure, path, domain, expires&#125;</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">setCookie(“type”, “js”, &#123;</span><br><span class="line">	secure: <span class="literal">true</span>,</span><br><span class="line">	expires: <span class="number">60000</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="必须传值的解构参数"><a href="#必须传值的解构参数" class="headerlink" title="必须传值的解构参数"></a>必须传值的解构参数</h5><p>　　由于不能讲解构参数赋值给undefined，所以不传值时会报错。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, &#123; secure, path, domain, expires&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="解构参数的默认值"><a href="#解构参数的默认值" class="headerlink" title="解构参数的默认值"></a>解构参数的默认值</h5><p>　　只需在参数后添加等号并制定一个默认值就行，如果解构参数时可选的，还需将整个解构参数设置一个默认值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> setCookieDefaults = &#123;</span><br><span class="line">	secure: <span class="literal">false</span>,</span><br><span class="line">	path: “/”,</span><br><span class="line">	domain: “example.com”,</span><br><span class="line">	expires: <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + <span class="number">360000000</span>)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, </span></span></span><br><span class="line"><span class="function"><span class="params">&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">	secure = setCookieDefaults.secure,</span></span></span><br><span class="line"><span class="function"><span class="params">   path = setCookieDefaults.path,</span></span></span><br><span class="line"><span class="function"><span class="params">   domain = setCookieDefaults.domain,</span></span></span><br><span class="line"><span class="function"><span class="params">   expires = setCookieDefaults.expires</span></span></span><br><span class="line"><span class="function"><span class="params">&#125; = setCookieDefaults</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/ES6/">ES6</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2017-2018 waldosia</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>